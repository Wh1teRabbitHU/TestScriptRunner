"use strict";var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){return function e(t,r,n){function s(i,o){if(!r[i]){if(!t[i]){var c="function"==typeof require&&require;if(!o&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var h=r[i]={exports:{}};t[i][0].call(h.exports,function(e){var r=t[i][1][e];return s(r||e)},h,h.exports,e,t,r,n)}return r[i].exports}for(var u="function"==typeof require&&require,i=0;i<n.length;i++)s(n[i]);return s}}()({1:[function(e,t,r){var n=e("./models/test-runner"),s=e("./models/test-case"),u=e("./models/test-step");void 0===window.TestScriptRunner?window.TestScriptRunner={TestRunner:n,TestCase:s,TestStep:u}:window.console.log('"TestScriptRunner" global variable already taken!')},{"./models/test-case":6,"./models/test-runner":8,"./models/test-step":9}],2:[function(e,t,r){t.exports=function e(t,r){_classCallCheck(this,e),this.name=this.constructor.name,this.message=t+(void 0===r?"":"\nDetails: "+JSON.stringify(r,null,4))+"\nStacktrace:",Error.captureStackTrace(this,this.constructor)}},{}],3:[function(e,t,r){var n=e("./base"),s=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,n),t}();t.exports=s},{"./base":2}],4:[function(e,t,r){var n=e("./base"),s=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,n),t}();t.exports=s},{"./base":2}],5:[function(e,t,r){var n=e("./base"),s=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,n),t}();t.exports=s},{"./base":2}],6:[function(e,t,r){var n=e("../exceptions/out-of-bound"),s=e("../exceptions/step-not-found"),u=1,i=function(){function e(t){var r=t.name,n=t.description;_classCallCheck(this,e),this.name=r,this.description=n,this.testSteps=[],this.stepCounter=0,this.currentStepNumber=u}return _createClass(e,[{key:"setTestRunner",value:function(e){this.testRunner=e,this.caseNumber=++e.caseCounter}},{key:"addTestStep",value:function(e){this.testSteps.push(e),e.setTestCase(this)}},{key:"hasPrevStep",value:function(){return this.currentStepNumber>u}},{key:"hasNextStep",value:function(){return this.currentStepNumber<this.stepCounter}},{key:"runPrevStep",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.currentStepNumber<=u)throw new n("Cannot run the previous step, because the current one is the first one!",{caseNumber:this.caseNumber,currentStepNumber:this.currentStepNumber});return this.currentStepNumber--,this.runCurrentStep(e)}},{key:"runNextStep",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.currentStepNumber>=this.stepCounter)throw new n("Cannot run the next step, because the current one is the last one!",{caseNumber:this.caseNumber,currentStepNumber:this.currentStepNumber});return this.currentStepNumber++,this.runCurrentStep(e)}},{key:"runStep",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e>this.stepCounter||e<u)throw new n("The given ID is not valid, its out of bound: "+e,{caseNumber:this.caseNumber,currentStepNumber:this.currentStepNumber});return this.currentStepNumber=e,this.runCurrentStep(t)}},{key:"runCurrentStep",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this,r=t.testSteps.find(function(e){return e.stepNumber===t.currentStepNumber});if(void 0===r)throw new s("Step not found with the following ID: "+t.currentStepNumber,{caseNumber:this.caseNumber,currentStepNumber:this.currentStepNumber});return e?r.runAsync():r.run()}}]),e}();t.exports=i},{"../exceptions/out-of-bound":4,"../exceptions/step-not-found":5}],7:[function(e,t,r){t.exports=function e(t){var r=t.success,n=t.error,s=t.returnValue,u=t.testStep,i=t.runNumber;_classCallCheck(this,e),this.success=r,this.error=n,this.returnValue=s,this.testStep=u,this.runNumber=i}},{}],8:[function(e,t,r){var n=function(){function e(){_classCallCheck(this,e),this.testCases=[],this.caseCounter=0}return _createClass(e,[{key:"addTestCase",value:function(e){this.testCases.push(e),e.setTestRunner(this)}}]),e}();t.exports=n},{}],9:[function(e,t,r){var n=e("./test-result"),s=e("../exceptions/function-not-found"),u=function(){function e(t){var r=t.name,n=t.description,s=t.fn;_classCallCheck(this,e),this.name=r,this.description=n,this.fn=s,this.runNumber=0,this.lastResult=null}return _createClass(e,[{key:"setTestCase",value:function(e){this.testCase=e,this.stepNumber=++e.stepCounter}},{key:"run",value:function(){if(void 0===this.fn||null===this.fn)throw new s("No test function provided to this step function!",{caseNumber:this.testCase.caseNumber,stepNumber:this.stepNumber});var e=void 0;this.runNumber++;try{var t=this.fn();e=new n({success:!0,error:null,returnValue:t,testStep:this,runNumber:this.runNumber})}catch(t){e=new n({success:!1,error:t,returnValue:null,testStep:this,runNumber:this.runNumber})}return this.lastResult=e,e}},{key:"runAsync",value:function(){var e=this;if(void 0===e.fn||null===e.fn)throw new s("No test function provided to this step function!",{caseNumber:e.testCase.caseNumber,stepNumber:e.stepNumber});return e.runNumber++,new Promise(function(t,r){try{t(e.fn())}catch(e){r(e)}}).then(function(t){var r=new n({success:!0,error:null,returnValue:t,testStep:e,runNumber:e.runNumber});return e.lastResult=r,r}).catch(function(t){var r=new n({success:!1,error:t,returnValue:null,testStep:e,runNumber:e.runNumber});throw e.lastResult=r,r})}},{key:"reset",value:function(){this.runNumber=0,this.lastResult=null}}]),e}();t.exports=u},{"../exceptions/function-not-found":3,"./test-result":7}]},{},[1]);
//# sourceMappingURL=test-script-runner-babel.min.js.map
