{"version":3,"sources":["test-script-runner.min.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","TestRunner","TestCase","TestStep","window","TestScriptRunner","console","log","./models/test-case","./models/test-runner","./models/test-step","2","[object Object]","message","errorObj","this","name","constructor","JSON","stringify","captureStackTrace","3","BaseException","./base","4","5","6","OutOfBoundException","StepNotFoundException","FIRST_STEP_ID","description","testSteps","stepCounter","currentStepNumber","testRunner","caseNumber","caseCounter","testStep","push","setTestCase","runCurrentStep","stepId","self","currentStep","find","step","stepNumber","run","../exceptions/out-of-bound","../exceptions/step-not-found","7","success","error","returnValue","runNumber","8","testCases","testCase","setTestRunner","9","TestResult","FunctionNotFoundException","fn","lastResult","parentCase","testResult","../exceptions/function-not-found","./test-result"],"mappings":"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","file":"test-script-runner.min.js","sourcesContent":["(function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()({1:[function(require,module,exports){\n'use strict';\n\nvar TestRunner = require('./models/test-runner');\nvar TestCase   = require('./models/test-case');\nvar TestStep   = require('./models/test-step');\n\nif (typeof window.TestScriptRunner == 'undefined') {\n\twindow.TestScriptRunner = {\n\t\tTestRunner: TestRunner,\n\t\tTestCase: TestCase,\n\t\tTestStep: TestStep\n\t};\n} else {\n\twindow.console.log('\"TestScriptRunner\" global variable already taken!');\n}\n},{\"./models/test-case\":6,\"./models/test-runner\":8,\"./models/test-step\":9}],2:[function(require,module,exports){\n'use strict';\n\nclass BaseException {\n\n\tconstructor(message, errorObj) {\n\t\tthis.name = this.constructor.name;\n\t\tthis.message = message + (typeof errorObj == 'undefined' ? '' : '\\nDetails: ' + JSON.stringify(errorObj, null, 4)) + '\\nStacktrace:';\n\n\t\tError.captureStackTrace(this, this.constructor);\n\t}\n\n}\n\nmodule.exports = BaseException;\n},{}],3:[function(require,module,exports){\n'use strict';\n\nconst BaseException = require('./base');\n\nclass FunctionNotFound extends BaseException {}\n\nmodule.exports = FunctionNotFound;\n},{\"./base\":2}],4:[function(require,module,exports){\n'use strict';\n\nconst BaseException = require('./base');\n\nclass OutOfBound extends BaseException {}\n\nmodule.exports = OutOfBound;\n},{\"./base\":2}],5:[function(require,module,exports){\n'use strict';\n\nconst BaseException = require('./base');\n\nclass StepNotFound extends BaseException {}\n\nmodule.exports = StepNotFound;\n},{\"./base\":2}],6:[function(require,module,exports){\n'use strict';\n\nconst OutOfBoundException   = require('../exceptions/out-of-bound');\nconst StepNotFoundException = require('../exceptions/step-not-found');\n\nconst FIRST_STEP_ID = 1;\n\nclass TestCase {\n\n\tconstructor({ name, description }) {\n\t\tthis.name = name;\n\t\tthis.description = description;\n\t\tthis.testSteps = [];\n\t\tthis.stepCounter = 0;\n\t\tthis.currentStepNumber = FIRST_STEP_ID;\n\t}\n\n\tsetTestRunner(testRunner) {\n\t\tthis.testRunner = testRunner;\n\t\tthis.caseNumber = ++testRunner.caseCounter;\n\t}\n\n\taddTestStep(testStep) {\n\t\tthis.testSteps.push(testStep);\n\n\t\ttestStep.setTestCase(this);\n\t}\n\n\thasPrevStep() {\n\t\treturn this.currentStepNumber > FIRST_STEP_ID;\n\t}\n\n\thasNextStep() {\n\t\treturn this.currentStepNumber < this.stepCounter;\n\t}\n\n\trunPrevStep() {\n\t\tif (this.currentStepNumber <= FIRST_STEP_ID) {\n\t\t\tthrow new OutOfBoundException('Cannot run the previous step, because the current one is the first one!', {\n\t\t\t\tcaseNumber: this.caseNumber,\n\t\t\t\tcurrentStepNumber: this.currentStepNumber\n\t\t\t});\n\t\t}\n\n\t\tthis.currentStepNumber--;\n\n\t\treturn this.runCurrentStep();\n\t}\n\n\trunNextStep() {\n\t\tif (this.currentStepNumber >= this.stepCounter) {\n\t\t\tthrow new OutOfBoundException('Cannot run the next step, because the current one is the last one!', {\n\t\t\t\tcaseNumber: this.caseNumber,\n\t\t\t\tcurrentStepNumber: this.currentStepNumber\n\t\t\t});\n\t\t}\n\n\t\tthis.currentStepNumber++;\n\n\t\treturn this.runCurrentStep();\n\t}\n\n\trunStep(stepId) {\n\t\tif (stepId > this.stepCounter || stepId < FIRST_STEP_ID) {\n\t\t\tthrow new OutOfBoundException('The given ID is not valid, its out of bound: ' + stepId, {\n\t\t\t\tcaseNumber: this.caseNumber,\n\t\t\t\tcurrentStepNumber: this.currentStepNumber\n\t\t\t});\n\t\t}\n\n\t\tthis.currentStepNumber = stepId;\n\n\t\treturn this.runCurrentStep();\n\t}\n\n\trunCurrentStep() {\n\t\tlet self = this,\n\t\t\tcurrentStep = self.testSteps.find((step) => {\n\t\t\t\treturn step.stepNumber === self.currentStepNumber;\n\t\t\t});\n\n\t\tif (typeof currentStep == 'undefined') {\n\t\t\tthrow new StepNotFoundException('Step not found with the following ID: ' + self.currentStepNumber, {\n\t\t\t\tcaseNumber: this.caseNumber,\n\t\t\t\tcurrentStepNumber: this.currentStepNumber\n\t\t\t});\n\t\t}\n\n\t\treturn currentStep.run();\n\t}\n\n}\n\nmodule.exports = TestCase;\n},{\"../exceptions/out-of-bound\":4,\"../exceptions/step-not-found\":5}],7:[function(require,module,exports){\n'use strict';\n\nclass TestResult {\n\n\tconstructor({ success, error, returnValue, testStep, runNumber }) {\n\t\tthis.success = success;\n\t\tthis.error = error;\n\t\tthis.returnValue = returnValue;\n\t\tthis.testStep = testStep;\n\t\tthis.runNumber = runNumber;\n\t}\n\n}\n\nmodule.exports = TestResult;\n},{}],8:[function(require,module,exports){\n'use strict';\n\nclass TestRunner {\n\n\tconstructor() {\n\t\tthis.testCases = [];\n\t\tthis.caseCounter = 0;\n\t}\n\n\taddTestCase(testCase) {\n\t\tthis.testCases.push(testCase);\n\n\t\ttestCase.setTestRunner(this);\n\t}\n}\n\nmodule.exports = TestRunner;\n},{}],9:[function(require,module,exports){\n'use strict';\n\nconst TestResult                = require('./test-result');\nconst FunctionNotFoundException = require('../exceptions/function-not-found');\n\nclass TestStep {\n\n\tconstructor({ name, description, fn }) {\n\t\tthis.name = name;\n\t\tthis.description = description;\n\t\tthis.fn = fn;\n\t\tthis.runNumber = 0;\n\t\tthis.lastResult = null;\n\t}\n\n\tsetTestCase(parentCase) {\n\t\tthis.parentCase = parentCase;\n\t\tthis.stepNumber = ++parentCase.stepCounter;\n\t}\n\n\trun() {\n\t\tif (typeof this.fn == 'undefined' || this.fn === null) {\n\t\t\tthrow new FunctionNotFoundException('No test function provided to this step function!', {\n\t\t\t\tcaseNumber: this.parentCase.caseNumber,\n\t\t\t\tstepNumber: this.stepNumber\n\t\t\t});\n\t\t}\n\n\t\tlet testResult;\n\n\t\tthis.runNumber++;\n\n\t\ttry {\n\t\t\tlet returnValue = this.fn();\n\n\t\t\ttestResult = new TestResult({\n\t\t\t\tsuccess: true,\n\t\t\t\terror: null,\n\t\t\t\treturnValue: returnValue,\n\t\t\t\ttestStep: this,\n\t\t\t\trunNumber: this.runNumber\n\t\t\t});\n\t\t} catch (error) {\n\t\t\ttestResult = new TestResult({\n\t\t\t\tsuccess: false,\n\t\t\t\terror: error,\n\t\t\t\treturnValue: null,\n\t\t\t\ttestStep: this,\n\t\t\t\trunNumber: this.runNumber\n\t\t\t});\n\t\t}\n\n\t\tthis.lastResult = testResult;\n\n\t\treturn testResult;\n\t}\n\n\treset() {\n\t\tthis.runNumber = 0;\n\t\tthis.lastResult = null;\n\t}\n\n}\n\nmodule.exports = TestStep;\n},{\"../exceptions/function-not-found\":3,\"./test-result\":7}]},{},[1]);\n"]}